<!DOCTYPE html>
<html>
<head>
<style>
body{
    background-color:#271408;
    margin: 0;
    overflow: hidden;
    background-image: url(./Dojo.webp);
    background-repeat: no-repeat;
    user-select: none; /* Disables text selection */

}
@font-face {
    font-family: "ninja";
    src: url("./fonts/ninja-font2.ttf");
}
#indicator{
    position: absolute;
    scale: 3;
    margin-left: 260px;
    margin-top: 600px;
    color: blueviolet;
    display: none;
}
.hitBoxCords{
    position: absolute;
    scale: 1.5;
    /* margin-left: 50px; */
    /* margin-top: 460px; */
    color: yellow;
    font-weight: 900;
    /* background-color: white; */
    /* ss2 */
    display: none;
}
#playerHitBoxBox{
    position: absolute;
    scale: 1.5;
    margin-left: 50px;
    margin-top: 490px;
    color: yellow;
    font-weight: 900;
    display: none;
}
#enemyHitBoxBox{
    position: absolute;
    scale: 1.5;
    margin-right: 50px;
    margin-top: 490px;
    color: yellow;
    right: 0;
    font-weight: 900;
    display: none;
}
#player,
#enemy,
.attack,
.Eattack,
.Death,
.DeathE,
.TakeHit,
.TakeHitE,
#fall,
#fallE,
.run,
.runE{
    position: absolute;
    display:none;
    scale: 3;
}
.healthBar1{
    width: 250px;
    height: 30px;
    outline: black solid 3px;
    position: absolute;
    margin: 40px;
}
.healthBar2{
    width: 250px;
    height: 30px;
    outline: black solid 3px;
    position: absolute;
    margin: 40px;
    right: 0;
}
#healthBarPlayer{
    position: absolute;
    height: inherit;
    width: 100%;
    background-color: red;
    left: 0;
}
#healthBarEnemy{
    position: absolute;
    height: inherit;
    width: 100%;
    background-color: red;
    right: 0;
}
.progress-container1 {
    width: 200px;
    background-color: transparent;
    /* border-radius: 25px; */
    overflow: hidden;
    height: 15px;
    outline: black solid 3px;
    margin: 20px;
    position: absolute;
    margin-left: 40px;
    margin-top: 74px;

}
.progress-bar1 {
    height: 100%;
    width: 0px;
    background-color: #4caf50;
    transition: width 10s linear;
}
.progress-container2 {
    width: 200px;
    background-color: transparent;
    /* border-radius: 25px; */
    overflow: hidden;
    height: 15px;
    outline: black solid 3px;
    margin: 20px;
    position: absolute;
    margin-right: 40px;
    margin-top: 74px;
    right: 0;

}

.progress-bar2 {
    position: absolute;
    height: 100%;
    width: 0;
    background-color: #4caf50;
    right: 0;
    transition: width 0.1s linear;
}
#time{
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    font-family: 900;
    font-size:40px;
    margin-top: 26px;
    font-family:ninja ;
    /* font-family: "Arial", sans-serif; Use a monospaced or tabular-enabled font for best results */
    font-weight: 100;
    /* color: whitesmoke; */
    letter-spacing: 0.2em; /* Adjust the value as needed */

    /* font-variant-numeric: tabular-nums; */

}
#resultIndicator{
    position: absolute;
    top: 50%;
    left: 50%;
    font-size:100px;
    margin: 0;
    text-wrap: nowrap;
    /* background-color: green; */
    transform: translate(-50%,-50%);
    display: none;
}
</style>
</head>
<body>

<!-- <p id="p" style="position: absolute;margin-left: 10px;border: 2px black solid;">A canvas element is displayed like this:</p> -->
<!-- <p id="p2" style="position: absolute;margin-right:10px;right: 0;border: 2px black solid;">A canvas element is displayed like this:</p> -->

<p id="attackRangeP" style="display: none;padding: 10px;background-color: green;position: absolute;margin-left:10px;left: 10;top:80px;border: 2px black solid;">A canvas element is displayed like this:</p>
<p id="attackRangeE" style="display: none;padding: 10px;background-color: green;position: absolute;margin-right:10px;right: 0;top:80px;border: 2px black solid;">A canvas element is displayed like this:</p>

<div class="healthBar1"><div id="healthBarPlayer"></div></div>
<div class="healthBar2"><div id="healthBarEnemy"></div></div>

<div class="progress-container1">
    <div class="progress-bar1" id="specialBar1"></div>
</div>
<div class="progress-container2">
    <div class="progress-bar2" id="specialBar2"></div>
</div>

<p id="playerHitBoxBox">boxbox</p>
<p class="hitBoxCords" id="XL">XL</p>
<p class="hitBoxCords" id="XR">XR</p>
<p class="hitBoxCords" id="YT">YT</p>
<p class="hitBoxCords" id="YB">YB</p>
<p id="enemyHitBoxBox">Test</p>
<p class="hitBoxCords" id="XL">XL</p>
<p class="hitBoxCords" id="XR">XR</p>
<p class="hitBoxCords" id="YT">YT</p>
<p class="hitBoxCords" id="YB">YB</p>

<!-- //Player -->
<img id="player" src="./samurai/Idle.png">
<img id="Attack1" class="attack"src="./samurai/attack/Attack_1.png">
<img id="Attack2" class="attack"src="./samurai/attack/Attack_2.png">
<img id="Attack3" class="attack"src="./samurai/attack/Attack_3.png">
<img id="Attack4" class="attack"src="./samurai/attack/Attack_4.png">

<img id="Run0" class="run" src="./samurai/run/Run_0.png">
<img id="Run1" class="run" src="./samurai/run/Run_1.png">
<img id="Run2" class="run" src="./samurai/run/Run_2.png">
<img id="Run3" class="run" src="./samurai/run/Run_3.png">
<img id="Run4" class="run" src="./samurai/run/Run_4.png">
<img id="Run5" class="run" src="./samurai/run/Run_5.png">
<img id="Run6" class="run" src="./samurai/run/Run_6.png">
<img id="Run7" class="run" src="./samurai/run/Run_7.png">

<img id="fall" src="./samurai/fall/Fall.png">

<img id="TakeHit0" class="TakeHit" src="./samurai/TakeHit/TakeHit_0.png">
<img id="TakeHit1" class="TakeHit" src="./samurai/TakeHit/TakeHit_1.png">
<img id="TakeHit2" class="TakeHit" src="./samurai/TakeHit/TakeHit_2.png">

<img id="Death0" class="Death" src="./samurai/Death/Death_0.png">
<img id="Death1" class="Death" src="./samurai/Death/Death_1.png">
<img id="Death2" class="Death" src="./samurai/Death/Death_2.png">
<img id="Death3" class="Death" src="./samurai/Death/Death_3.png">
<img id="Death4" class="Death" src="./samurai/Death/Death_4.png">
<img id="Death5" class="Death" src="./samurai/Death/Death_5.png">

<!-- //Enemy -->
<img id="enemy" src="./kenji/idle.png">
<img id="AttackE1" class="Eattack"src="./kenji/attack/Attack1.png">
<img id="AttackE2" class="Eattack"src="./kenji/attack/Attack2.png">
<img id="AttackE3" class="Eattack"src="./kenji/attack/Attack3.png">
<img id="AttackE4" class="Eattack"src="./kenji/attack/Attack4.png">

<img id="RunE0" class="runE" src="./kenji/run/Run_0.png">
<img id="RunE1" class="runE" src="./kenji/run/Run_1.png">
<img id="RunE2" class="runE" src="./kenji/run/Run_2.png">
<img id="RunE3" class="runE" src="./kenji/run/Run_3.png">
<img id="RunE4" class="runE" src="./kenji/run/Run_4.png">
<img id="RunE5" class="runE" src="./kenji/run/Run_5.png">
<img id="RunE6" class="runE" src="./kenji/run/Run_6.png">
<img id="RunE7" class="runE" src="./kenji/run/Run_7.png">

<img id="fallE" src="./kenji/fall/Fall.png">

<img id="TakeHitE0" class="TakeHitE" src="./kenji/TakeHit/TakeHit_0.png">
<img id="TakeHitE1" class="TakeHitE" src="./kenji/TakeHit/TakeHit_1.png">
<img id="TakeHitE2" class="TakeHitE" src="./kenji/TakeHit/TakeHit_2.png">

<img id="DeathE0" class="DeathE" src="./kenji/Death/Death_0.png">
<img id="DeathE1" class="DeathE" src="./kenji/Death/Death_1.png">
<img id="DeathE2" class="DeathE" src="./kenji/Death/Death_2.png">
<img id="DeathE3" class="DeathE" src="./kenji/Death/Death_3.png">
<img id="DeathE4" class="DeathE" src="./kenji/Death/Death_4.png">
<img id="DeathE5" class="DeathE" src="./kenji/Death/Death_5.png">


<h2 id="indicator"></h2>
<h2 id="resultIndicator">Player Won</h2>
<h2 id="time">60</h2>
<canvas id="canvas" style="width: 100vw; height: 100vh;">Your browser does not support the HTML5 canvas tag.</canvas>
<!-- <button id="button">Press</button> -->
<script>
    let canvas;
    let context;
    let x,y;

    //Turn this to true to turn on Debugging Visualizer
    let debug = false;
    const globalCooldown = 10000;

    const keysPressed = new Set(); // Track keys pressed
    const scale = 3; // Set your scale factor here
    const charWidht = 52.5*scale;
    const charHeight = 52.5*scale;
    const width = 210 * scale; // Scaled width
    const height = 210 * scale; // Scaled height

    let playerMoveFrameCounter = 0;  // Keeps track of the current frame
    let enemyMoveEFrameCounter = 0;  // Keeps track of the current frame

    let playerAttackFrameCounter = 0;  // Keeps track of the current frame
    let enemyAttackFrameCounter = 0;  // Keeps track of the current frame

    let playerDeathFrameCounter = 0;
    let enemyDeathFrameCounter = 0;
    
    let playerTakeHitFrameCounter = 0;
    let enemyTakeHitFrameCounter = 0;

    function User(name,x,y,dpa) {

        this.name = name;
        this.health = 100;
        this.x = x;
        this.y = y;
        this.dpa = dpa;

        let isAttacking = false;
        let isTakingHit = false;
        let cooldown = false;
        let dashCooldown = false;
        let isMoving = false;
        let isJumping = false; 
        let isFalling = false; 
        let isDashing = false; 
        let isDead = false;
        let playingAnimation = false;

        let attackRangeS;
        let attackRangeE ;
        let attackRangeT ;
        let attackRangeB ;

        let hitBoxXL;
        let hitBoxXR;
        let hitBoxYT;
        let hitBoxYB;

        this.attack = function(){
            if(!this.cooldown){
                this.isAttacking = true;
                this.cooldown = true;
            }
            setTimeout(() => {
                this.isAttacking = false;
                if (this === player) {     
                    if(enemy.hitBoxXL >= player.attackRangeS && enemy.hitBoxXL <= player.attackRangeE){                        
                        if(enemy.hitBoxYB <= player.attackRangeB && enemy.hitBoxYB >= player.attackRangeT || enemy.hitBoxYT <= player.attackRangeB && enemy.hitBoxYT >= player.attackRangeT ){
                            console.log("Hit");
                            enemy.takeHit(player.dpa);       
                        }else{
                            console.log("missed Y");
                        }
                    }
                    else if(enemy.hitBoxXR >= player.attackRangeS && enemy.hitBoxXR <= player.attackRangeE){
                        if(enemy.hitBoxYB <= player.attackRangeB && enemy.hitBoxYB >= player.attackRangeT || enemy.hitBoxYT <= player.attackRangeB && enemy.hitBoxYT >= player.attackRangeT ){
                            console.log("Hit");
                            enemy.takeHit(player.dpa);       
                        }else{
                            console.log("missed Y");
                        }    
                    }
                    else{
                        console.log("Miss");
                    }
                } 
                else if (this === enemy) {
                    if(player.hitBoxXL <= enemy.attackRangeS && player.hitBoxXL >= enemy.attackRangeE){                        
                        if(player.hitBoxYB <= enemy.attackRangeB && player.hitBoxYB >= enemy.attackRangeT || player.hitBoxYT <= enemy.attackRangeB && player.hitBoxYT >= enemy.attackRangeT ){
                            console.log("Hit");
                            player.takeHit(enemy.dpa);       
                        }else{
                            console.log("missed Y");
                        }
                    }
                    else if(player.hitBoxXR <= enemy.attackRangeS && player.hitBoxXR >= enemy.attackRangeE){
                        console.log("Hit X");
                        if(player.hitBoxYB <= enemy.attackRangeB && player.hitBoxYB >= enemy.attackRangeT || player.hitBoxYT <= enemy.attackRangeB && player.hitBoxYT >= enemy.attackRangeT ){
                            console.log("Hit");
                            player.takeHit(enemy.dpa);       
                        }else{
                            console.log("missed Y");
                        }    
                    }
                    else{
                        console.log("Miss");
                    }       
                }
            }, 200); 
            setTimeout(() => {
                this.cooldown = false;
            }, 500); 
        }

        this.takeHit = function(dpa){
            this.isTakingHit = true;
            setTimeout(() => {                
                this.health -= dpa;
                healthBarEnemy.style.width = (enemy.health) + '%';
                healthBarPlayer.style.width = (player.health) + '%';
            }, 50);
            setTimeout(() => {
                this.isTakingHit = false;
                playerTakeHitFrameCounter = 0;
                enemyTakeHitFrameCounter = 0;
            }, 400); 
        }


        this.jump = function(){
            this.isJumping = true; // Set jumping state
            let counter = 0;
            const intervalId = setInterval(() => {
                if (counter < 50) { // Number of upward moves for the jump
                    this.y -= 6; // Move up gradually
                    counter++;
                } else {
                    clearInterval(intervalId); // Stop the upward movement
                    console.log("CAlling Fall()");
                    this.fall(); // Start falling back down
                }
            }, 1);
        }


        this.fall = function(){
            console.log('Falling!');
            this.isFalling = true;
            let fallCounter = 0;
            const fallIntervalId = setInterval(() => {
                if (fallCounter < 50) { // Number of downward moves
                    this.y += 6; // Move down gradually
                    fallCounter++;
                } else {
                    clearInterval(fallIntervalId); // Stop the downward movement
                    this.isJumping = false; // Reset jumping state
                    this.isFalling = false;
                }
            }, 1);
        }


        this.dash = function(){
            // If dash is on cooldown, return early
            if (this.isDashing === true || this.dashCooldown === true) {
                console.log(this.name+" is in CoolDown!");
                return;
            }
            this.isDashing = true; // Set dashing state
            this.dashCooldown = true;
            this.playingAnimation=true;
            
            if (this === player) {            
                this.x += 70*scale; // Move player position to the right
            } 
            else if (this === enemy) {
                this.x -= 70*scale; // Move player position to the left
            }
            resetCoolDown(this.name);
            this.attack();
            setTimeout(() => {
                startCoolDown(this.name);
                if (this === player) {            
                    this.x -= 70*scale; // Move back player to the left
                } 
                else if (this === enemy) {
                    this.x += 70*scale; // Move back player to the right
                }
                this.playingAnimation = false; // Animation ends
            }, 250);
            setTimeout(() => {
                this.isDashing = false; // Reset cooldown after 3 seconds
            }, 400);
        }

    }

    const player = new User('player',-120,53,25);
    const enemy = new User('enemy',300,35,25);

    window.onload = init;

    function init() {
        canvas = document.getElementById('canvas');
        // p = document.getElementById('p');
        // p2 = document.getElementById('p2');
        pAttackRange = document.getElementById('attackRangeP');
        eAttackRange = document.getElementById('attackRangeE');
        playerHitBoxBox = document.getElementById('playerHitBoxBox');
        pEnemyHitBoxBox = document.getElementById('enemyHitBoxBox');
        hitBoxCords = document.querySelectorAll('.hitBoxCords');
        indicator = document.getElementById("indicator");


        time = document.getElementById("time");
        resultIndicator = document.getElementById("resultIndicator");

        context = canvas.getContext('2d');

        healthBarPlayer =  document.getElementById("healthBarPlayer");
        healthBarEnemy = document.getElementById("healthBarEnemy");
        
        specialBar1 = document.getElementById('specialBar1');
        specialBar2 = document.getElementById('specialBar2');

        playerimg = document.getElementById("player");
        enemyimg = document.getElementById("enemy");

        //Attack Frames
        playerAttackF =  document.querySelectorAll(".attack");
        enemyAttackF = document.querySelectorAll(".Eattack");

        //Fall Frame
        playerFallF = document.getElementById("fall");
        enemyFallF = document.getElementById("fallE");

        //Move Frames
        playerMoveF = document.querySelectorAll(".run");
        enemyMoveF = document.querySelectorAll(".runE");

        //Take Hit Frames
        playerTakeHitF = document.querySelectorAll(".TakeHit");
        enemyTakeHitF = document.querySelectorAll(".TakeHitE");

        //Death Frames
        playerDeathF = document.querySelectorAll(".Death");
        enemyDeathF = document.querySelectorAll(".DeathE");

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Track keydown and keyup events
        window.addEventListener('keydown', (event) => {
            keysPressed.add(event.key);
        });
        window.addEventListener('keyup', (event) => {
            keysPressed.delete(event.key);
        });

        // Start the game loop
        window.requestAnimationFrame(gameLoop);
        // Moving and Attacking Frame Interval
        setInterval(() => {
            if(player.isMoving){
                playerMoveFrameCounter = (playerMoveFrameCounter + 1) % (playerMoveF.length);  
            }
            if(enemy.isMoving){
                enemyMoveEFrameCounter = (enemyMoveEFrameCounter + 1) % (enemyMoveF.length);  
            }
            if(enemy.isAttacking){
                enemyAttackFrameCounter = (enemyAttackFrameCounter+1) % (enemyAttackF.length);
            }
            if(player.isAttacking){
                playerAttackFrameCounter = (playerAttackFrameCounter+1) % (playerAttackF.length);
            }
            
        }, 50);
        //Taking Hit Frame Interval
        setInterval(() => {
            if(player.isTakingHit){
                playerTakeHitFrameCounter = (playerTakeHitFrameCounter+1) % (playerTakeHitF.length);
            }
            if(enemy.isTakingHit){
                enemyTakeHitFrameCounter = (enemyTakeHitFrameCounter+1) % (enemyTakeHitF.length);
            }
            if(player.isDead){
                if(playerDeathFrameCounter < 4){
                    playerDeathFrameCounter++;
                }
            }
            if(enemy.isDead){
                if(enemyDeathFrameCounter < 5){
                    enemyDeathFrameCounter++;
                }
            }
        }, 200);
        
        startCountdown();

        // Initial Cooldown
        player.dashCooldown = true;
        enemy.dashCooldown = true;
        setTimeout(() => {
            player.dashCooldown = false;
            enemy.dashCooldown = false;
            console.log("Initial Cool DOwn Ended!");
        }, globalCooldown);

        startCoolDown("player");
        startCoolDown("enemy");

    }

    function gameLoop(timeStamp) {
        // Clear the canvas for each frame
        context.clearRect(0, 0, canvas.width, canvas.height);

        characterMovement(player, {left: 'a',right: 'd',attack: 's',jump: 'w',dash: ' ',});
        characterMovement(enemy, {left: 'ArrowLeft',right: 'ArrowRight',attack: 'ArrowDown',jump: 'ArrowUp',dash: 'Enter',});
        
        playerDraw();
        enemyDraw();
        
        checkHealth();   
        
        getPlayerAttackBoxAndHitBox();
        getEnemyAttackBoxAndHitBox();

        if(debug === true){
            debugPlayerAttackBoxAndHitBox();
            debugEnemyAttackBoxAndHitBox();
            for (let i = 0; i < 8; i++) { // Loop from 0 to 7
                hitBoxCords[i].style.display = "block";
            }
            playerHitBoxBox.style.display = "block";
            enemyHitBoxBox.style.display = "block";
            pAttackRange.style.display = "block";
            eAttackRange.style.display = "block";
            indicator.style.display = "block";
        }

        window.requestAnimationFrame(gameLoop); // Keep requesting new frames
    }
    function playerDraw(){
        if (player.isDead){
            drawDeath(playerDeathF[playerDeathFrameCounter],player.x,player.y);
            return;
        }
        if (player.isAttacking){
            drawAttack(playerAttackF[playerAttackFrameCounter],player.x,player.y); 
        }
        if (player.isTakingHit && !player.isAttacking){
            drawTakeHit(playerTakeHitF[playerTakeHitFrameCounter],player.x,player.y); 
        }
        else if (player.isMoving && !player.isAttacking) {
            drawMove(playerMoveF[playerMoveFrameCounter],player.x,player.y);
        } 
        else if (player.isFalling) {
            drawFall(playerFallF,player.x,player.y);
        } 
        else if(!player.isAttacking && !player.isFalling && !player.isMoving && !player.isDashing && !player.isDead) { 
            draw(playerimg,player.x,player.y); 
        }
    }
    function enemyDraw(){
        if (enemy.isDead) {
            drawDeath(enemyDeathF[enemyDeathFrameCounter],enemy.x,enemy.y);
            return;
        }
        if (enemy.isAttacking){   
            drawAttack(enemyAttackF[enemyAttackFrameCounter],enemy.x,enemy.y); 
        }
        if (enemy.isTakingHit && !enemy.isAttacking){
            drawTakeHit(enemyTakeHitF[enemyTakeHitFrameCounter],enemy.x,enemy.y); 
        }
        else if (enemy.isMoving && !enemy.isAttacking) {
            drawMove(enemyMoveF[enemyMoveEFrameCounter],enemy.x,enemy.y);
        } 
        else if (enemy.isFalling) {
            drawFall(enemyFallF,enemy.x,enemy.y);
        } 
        else if(!enemy.isAttacking && !enemy.isFalling && !enemy.isMoving && !enemy.isDashing && !enemy.isDead) { 
            draw(enemyimg,enemy.x,enemy.y); 
        }
    }

    function characterMovement(character, controls) {
        const { left, right, attack, jump, dash } = controls;

        if (keysPressed.has(right) && character.x < canvas.width - 380 && !character.playingAnimation && !character.isDead) {
            character.x += 10;
        }
        if (keysPressed.has(left) && character.x > -220 && !character.playingAnimation && !character.isDead) {
            character.x -= 10;
        }
        if (keysPressed.has(left) || keysPressed.has(right)) {
            character.isMoving = true;
            console.log('isMoving: ', character.name+":"+character.isMoving);
            console.log(playerMoveFrameCounter);
            console.log(enemyMoveEFrameCounter);
        } else {
            character.isMoving = false;
        }
        if (keysPressed.has(left) && keysPressed.has(right)) {
            character.isMoving = false;
        }
        if (keysPressed.has(attack) && !character.playingAnimation && !character.isAttacking && !character.cooldown && !character.isDead) {
            character.attack();
        }
        if (keysPressed.has(jump) && !character.isJumping && !character.isDead) character.jump();
        if (keysPressed.has(dash) && !character.isDashing &&!character.dashCooldown && !character.isAttacking && !character.isDead) character.dash();
    }

    function checkHealth(){
        indicator.innerText = "Enemy:"+enemy.health+" Player:"+player.health;
        if(enemy.health <= 0){
            enemy.isDead = true;
            console.log("Enemy Dead");
            indicator.innerText = "Enemy Dead";
        }
        if(player.health <= 0){
            player.isDead = true;
            console.log("Player Dead");
            indicator.innerText = "Player Dead";
        }
    }


    function draw(charImg,x, y) {
        context.drawImage(charImg, x, y,width,height); // Draw the scaled image
    }

    function drawAttack(charAttack,x, y) {
        context.drawImage(charAttack, x, y,width,height); // Draw the scaled image
    }
    
    function drawTakeHit(charTakeHit,x, y) {
        context.drawImage(charTakeHit, x, y,width,height); // Draw the scaled image
    }

    function drawMove(charImgMove,x,y){
        context.drawImage(charImgMove, x, y,width,height); // Draw the scaled image
    }

    function drawFall(charFall,x,y){
        context.drawImage(charFall, x, y,width,height); // Draw the scaled image
    }
    
    function drawDeath(charDeath,x,y){
        context.drawImage(charDeath, x, y,width,height); // Draw the scaled image
    }
    function getPlayerAttackBoxAndHitBox(){
        player.attackRangeS= (player.x+width-(scale*87));
        player.attackRangeE = player.attackRangeS +(79*scale);
        player.attackRangeT = player.hitBoxYT;
        player.attackRangeB =player.hitBoxYB;

        //Left X
        player.hitBoxXL = (player.x+(87*scale));
        //Right X
        player.hitBoxXR = (player.x+width-(scale*87));
        //Top Y
        player.hitBoxYT = player.y+(69*scale);
        //Bottom Y
        player.hitBoxYB = player.y+height-(scale*81);

    }
    function debugPlayerAttackBoxAndHitBox(){
        //Player AttackBox
        context.lineWidth = "6";
        context.strokeStyle = "red";

        context.strokeRect(player.attackRangeS,player.hitBoxYT,1,player.hitBoxYB-player.hitBoxYT);
        context.strokeRect(player.attackRangeE,player.hitBoxYT,1,player.hitBoxYB-player.hitBoxYT);
        context.strokeRect(player.attackRangeS,player.attackRangeT,(79*scale),1);
        context.strokeRect(player.attackRangeS,player.attackRangeB,(79*scale),1);
        
        pAttackRange.innerText = "Attack Range:"+"\n"+"X : "+player.attackRangeS +"-"+player.attackRangeE +"\n"+"Y : "+player.attackRangeT+"-"+player.attackRangeB ;

        //Player HitBox
        context.lineWidth = "6";
        context.strokeStyle = "blue";

        //Left X
            context.strokeRect(player.hitBoxXL,player.y+(height/2-6), 1,1);
            hitBoxCords[2].style.top = player.hitBoxYT+(26*scale)+"px";
            hitBoxCords[2].style.left = player.hitBoxXL-(3*scale)+"px";
            hitBoxCords[2].innerText = player.hitBoxXL;
        
        //Right X
            context.strokeRect(player.hitBoxXR,player.y+(height/2-6), 1,1);
            hitBoxCords[3].style.top = player.hitBoxYT+(26*scale)+"px";
            hitBoxCords[3].style.left = player.hitBoxXR-(3*scale)+"px";
            hitBoxCords[3].innerText = player.hitBoxXR;
            
        //Top Y
            context.strokeRect(player.hitBoxXL+((player.hitBoxXR-player.hitBoxXL)/2),player.hitBoxYT, 1,1);
            hitBoxCords[0].style.top = player.hitBoxYT-(8*scale)+"px";
            hitBoxCords[0].style.left = player.hitBoxXL+(14*scale)+"px";
            hitBoxCords[0].innerText = player.hitBoxYT;

        //Bottom Y
            context.strokeRect((player.x+(width/2-6)),player.hitBoxYB, 1,1);
            hitBoxCords[1].style.top = player.hitBoxYB-(8*scale)+"px";
            hitBoxCords[1].style.left = player.hitBoxXL+(14*scale)+"px";
            hitBoxCords[1].innerText = player.hitBoxYB;
            

        playerHitBoxBox.innerText = "Left X:"+player.hitBoxXL+"\n"+"Right X:"+player.hitBoxXR+"\n"+"Top Y:"+player.hitBoxYT+"\n"+"Bottom Y:"+player.hitBoxYB;
    }
    function getEnemyAttackBoxAndHitBox(){
        enemy.attackRangeS= enemy.hitBoxXL;
        enemy.attackRangeE = enemy.attackRangeS -230;
        enemy.attackRangeT = enemy.hitBoxYT;
        enemy.attackRangeB =enemy.hitBoxYB;

        //Left X 
        enemy.hitBoxXL = (enemy.x+(87*scale));
        //Right X
        enemy.hitBoxXR = (enemy.x+width-(scale*87));
        //Top Y
        enemy.hitBoxYT = enemy.y+(75*scale);
        //Bottom Y
        enemy.hitBoxYB = enemy.y+height-(scale*75);

    }
    function debugEnemyAttackBoxAndHitBox(){
        //Enemy AttackBox
        context.strokeStyle = "red";

        context.strokeRect(enemy.attackRangeS,enemy.hitBoxYT,1,enemy.hitBoxYB-enemy.hitBoxYT);
        context.strokeRect(enemy.attackRangeE,enemy.hitBoxYT,1,enemy.hitBoxYB-enemy.hitBoxYT);
        context.strokeRect(enemy.attackRangeS,enemy.attackRangeT,-230,1);
        context.strokeRect(enemy.attackRangeS,enemy.attackRangeB,-230,1);

        eAttackRange.innerText = "Attack Range:"+"\n"+"X : "+enemy.attackRangeS +"-"+enemy.attackRangeE +"\n"+"Y : "+enemy.attackRangeT+"-"+enemy.attackRangeB ;

        //Enemy HitBox    
            context.lineWidth = "6";
            context.strokeStyle = "blue";
        //Left X 
            context.strokeRect((enemy.x+(87*scale)),enemy.y+(height/2-6), 1,1);
            hitBoxCords[4].style.top = enemy.hitBoxYT+(20*scale)+"px";
            hitBoxCords[4].style.left = enemy.hitBoxXL-(3*scale)+"px";
            hitBoxCords[4].innerText = enemy.hitBoxXL;
        //Right X
            context.strokeRect((enemy.x+width-(scale*87)),enemy.y+(height/2-6), 1,1);
            hitBoxCords[5].style.top = enemy.hitBoxYT+(20*scale)+"px";
            hitBoxCords[5].style.left = enemy.hitBoxXR-(3*scale)+"px";
            hitBoxCords[5].innerText = enemy.hitBoxXR;
        //Top Y
            context.strokeRect((enemy.x+(width/2-6)),enemy.hitBoxYT, 1,1);
            hitBoxCords[6].style.top = enemy.hitBoxYT-(8*scale)+"px";
            hitBoxCords[6].style.left = enemy.hitBoxXL+(14*scale)+"px";
            hitBoxCords[6].innerText = enemy.hitBoxYT;
        //Bottom Y
            context.strokeRect((enemy.x+(width/2-6)),enemy.hitBoxYB, 1,1);
            hitBoxCords[7].style.top = enemy.hitBoxYB-(8*scale)+"px";
            hitBoxCords[7].style.left = enemy.hitBoxXL+(14*scale)+"px";
            hitBoxCords[7].innerText = enemy.hitBoxYB;
            
        pEnemyHitBoxBox.innerText = "Left X:"+enemy.hitBoxXL+"\n"+"Right X:"+enemy.hitBoxXR+"\n"+"Top Y:"+enemy.hitBoxYT+"\n"+"Bottom Y:"+enemy.hitBoxYB;    

    }

    function startCountdown(){
        let countdownDuration = 60;
        const interval = setInterval(() => {
            countdownDuration--;

            // Update the display
            time.innerText = countdownDuration;

            // Stop the countdown when it reaches 0
            if (countdownDuration <= 0) {
                clearInterval(interval);
            }
        }, 1000);
    }
    function resetCoolDown(name) {
        console.log("Reset CoolDown:"+name);
        if(name === "player"){
            specialBar1.style.transition = "width 0.1s linear";
            specialBar1.style.width = 0 + '%';
        }
        if(name === "enemy"){
            specialBar2.style.transition = "width 0.1s linear";
            specialBar2.style.width = 0 + '%';
        }
    }
    function startCoolDown(name){
        console.log("Start CoolDown:"+name);
        if(name === "player"){
            specialBar1.style.transition = "width 10s linear";
            specialBar1.style.width = 100 + '%';
            setTimeout(() => {
                player.dashCooldown = false; // Reset cooldown after 3 seconds
            }, globalCooldown);
        }
        if(name === "enemy"){
            specialBar2.style.transition = "width 10s linear";
            specialBar2.style.width = 100 + '%';
            setTimeout(() => {
                enemy.dashCooldown = false; // Reset cooldown after 3 seconds
            }, globalCooldown);
        }
    }
</script>

</body>
</html>
